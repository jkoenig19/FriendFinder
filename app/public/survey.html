<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>FriendFinder</title>
  </head>
  <body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <h4><strong>About You</strong></h4>
        <form>
            <div class="form-group">
                <label for="name">Name (Required)</label>
                <input type="text" class="form-control" id="name">
            </div>
            <div class="form-group">
                <label for="photo">Photo (Required)</label>
                <input type="text" class="form-control" id="photo">
            </div>
            <hr>
            <div class="row">
                <div class="form-group col-md-3">
                    <strong><label for="question1">Question 1</label></strong>
                    <br>
                    <label for="question1">Do you like American football?</label>
                    <select class="form-control" id="question1">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question2">Question 2</label></strong>
                    <br>
                    <label for="question2">Do you like baseball?</label>
                    <select class="form-control" id="question2">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question3">Question 3</label></strong>
                    <br>
                    <label for="question3">Do you like basketball?</label>
                    <select class="form-control" id="question3">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question4">Question 4</label></strong>
                    <br>
                    <label for="question4">Do you like ice hockey?</label>
                    <select class="form-control" id="question4">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question5">Question 5</label></strong>
                    <br>
                    <label for="question5">Do you like golf?</label>
                    <select class="form-control" id="question5">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question6">Question 6</label></strong>
                    <br>
                    <label for="question6">Do you like soccer?</label>
                    <select class="form-control" id="question6">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question7">Question 7</label></strong>
                    <br>
                    <label for="question7">Do you like bowling?</label>
                    <select class="form-control" id="question7">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question8">Question 8</label></strong>
                    <br>
                    <label for="question8">Do you like biking?</label>
                    <select class="form-control" id="question8">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question9">Question 9</label></strong>
                    <br>
                    <label for="question9">Do you like skiing?</label>
                    <select class="form-control" id="question9">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                    <br>
                    <strong><label for="question10">Question 10</label></strong>
                    <br>
                    <label for="question10">Do you like tennis?</label>
                    <select class="form-control" id="question10">
                        <option value="select">Select an Option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block" id="submit">Submit</button>
        </form>
        <hr>
        <footer class="footer">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/jkoenig19/FriendFinder">GitHub Repo</a>
        </footer>
        <div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="resultsModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="resultsModalLabel">Most recent closest match!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="modal-close" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript">
        $("#submit").on("click", function(event) {
            event.preventDefault();
            if ($("#name").val().trim() === "" || $("#photo").val().trim() === "" || $("#question1").val() === "select"
            || $("#question2").val() === "select" || $("#question3").val() === "select" || $("#question4").val() === "select" 
            || $("#question5").val() === "select" || $("#question6").val() === "select" || $("#question7").val() === "select"
            || $("#question8").val() === "select" || $("#question9").val() === "select" || $("#question10").val() === "select"){
                alert("Survey submission incomplete!");
                return;
            }
            else {
                var newSurvey = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#question1").val(),
                        $("#question2").val(),
                        $("#question3").val(),
                        $("#question4").val(),
                        $("#question5").val(),
                        $("#question6").val(),
                        $("#question7").val(),
                        $("#question8").val(),
                        $("#question9").val(),
                        $("#question10").val()
                    ]
                };
                $.post("/api/friends", newSurvey, function(data) {
                    $("#resultsModal").modal("show");
                    $(".modal-body").append(data.name + "<br>");
                    var photo = $("<img>").attr("src" , data.photo);
                    photo.attr("width", "200px");
                    $(".modal-body").append(photo);
                    $("#name").val("");
                    $("#photo").val("");
                    $("#question1").val("select");
                    $("#question2").val("select");
                    $("#question3").val("select");
                    $("#question4").val("select");
                    $("#question5").val("select");
                    $("#question6").val("select");
                    $("#question7").val("select");
                    $("#question8").val("select");
                    $("#question9").val("select");
                    $("#question10").val("select");
                });
            }
        });

        $("#modal-close").on("click", function(event) {
            event.preventDefault();
            $(".modal-body").empty();
        });

    </script>
  </body>
</html>